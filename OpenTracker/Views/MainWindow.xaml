<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:OpenTracker.ViewModels;assembly=OpenTracker"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:view="clr-namespace:OpenTracker.Views;assembly=OpenTracker"
        xmlns:vc="clr-namespace:OpenTracker.ValueConverters;assembly=OpenTracker"
        mc:Ignorable="d" MinWidth="220" MinHeight="61" d:DesignWidth="1280" d:DesignHeight="960"
        x:Class="OpenTracker.Views.MainWindow"
        x:Name="HostWindow"
        Background="#877373"
        UseLayoutRounding="True"
        Icon="/Assets/triforce.ico"
        Title="OpenTracker">

  <Design.DataContext>
    <vm:MainWindowVM />
  </Design.DataContext>

  <Window.Resources>

    <vc:EnumBooleanConverter x:Key="EnumBooleanConverter" />

  </Window.Resources>

  <DockPanel>

    <DockPanel DockPanel.Dock="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow}, Path=UIPanelDock, Mode=OneWay}"
               HorizontalAlignment="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow}, Path=UIPanelHorizontalAlignment, Mode=OneWay}"
               VerticalAlignment="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow}, Path=UIPanelHorizontalAlignment, Mode=OneWay}">

      <StackPanel DockPanel.Dock="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow}, Path=UIPanelOrientationDock, Mode=OneWay}"
                  Orientation="Vertical">

        <Border Background="#212121" Padding="10,5">
          <Grid ColumnDefinitions="Auto,*,Auto">

            <TextBlock FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                       Grid.Column="0" FontSize="12" FontWeight="SemiBold" Text="Items" Foreground="#F6F6F6"
                       Background="Transparent" />

            <Panel Grid.Column="2">

              <Image Source="avares://OpenTracker/Assets/Images/settings.png" PointerReleased="OpenModeSettingsPopup" />

              <Popup IsOpen="{Binding Path=ModeSettingsPopupOpen,
                     RelativeSource={RelativeSource AncestorType=view:MainWindow}, Mode=TwoWay}" StaysOpen="False"
                     PlacementMode="Top" PlacementTarget="{Binding RelativeSource={RelativeSource AncestorType=Panel},
                     Path=VisibleItemPopupTarget}" HorizontalOffset="8" VerticalOffset="8">

                <Border BorderBrush="#A9A9A9" BorderThickness="3" Background="#212121"
                        Padding="5">

                  <Grid ColumnDefinitions="*,*,*,*"
                        RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">

                    <TextBlock FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                               Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="0" FontSize="12" FontWeight="SemiBold"
                               Text="Item Placement" Foreground="#F6F6F6" Background="Transparent" Margin="4" />

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=ItemPlacement,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Basic}"
                                 GroupName="ItemPlacement" Margin="4,4,4,8">Basic</RadioButton>

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="2" Grid.ColumnSpan="2" Grid.Row="1" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=ItemPlacement,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Advanced}"
                                 GroupName="ItemPlacement" Margin="4,4,4,8">Advanced</RadioButton>

                    <TextBlock FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                               Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="2" FontSize="12" FontWeight="SemiBold"
                               Text="Dungeon Item Shuffle" Foreground="#F6F6F6" Background="Transparent" Margin="4" />

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="3" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=DungeonItemShuffle,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Standard}"
                                 GroupName="DungeonItemShuffle" Margin="4,4,4,8">Standard</RadioButton>

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="1" Grid.ColumnSpan="1" Grid.Row="3" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=DungeonItemShuffle,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=MapsCompasses}"
                                 GroupName="DungeonItemShuffle" Margin="4,4,4,8">Maps/Compasses</RadioButton>

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="2" Grid.ColumnSpan="1" Grid.Row="3" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=DungeonItemShuffle,
                                 Converter={StaticResource EnumBooleanConverter},
                                 ConverterParameter=MapsCompassesSmallKeys}"
                                 GroupName="DungeonItemShuffle" Margin="4,4,4,8">Maps/Compasses/Small Keys</RadioButton>

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="3" Grid.ColumnSpan="1" Grid.Row="3" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=DungeonItemShuffle,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Keysanity}"
                                 GroupName="DungeonItemShuffle" Margin="4,4,4,8">Keysanity</RadioButton>

                    <TextBlock FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                               Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="4" FontSize="12" FontWeight="SemiBold"
                               Text="World State" Foreground="#F6F6F6" Background="Transparent" Margin="4" />

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="5" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=WorldState,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=StandardOpen}"
                                 GroupName="WorldState" Margin="4,4,4,8">Standard/Open</RadioButton>

                    <RadioButton FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                                 Grid.Column="2" Grid.ColumnSpan="2" Grid.Row="5" FontSize="11" Foreground="#F6F6F6"
                                 Background="Transparent" IsChecked="{Binding Path=WorldState,
                                 Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Inverted}"
                                 GroupName="WorldState" Margin="4,4,4,8">Inverted</RadioButton>

                    <Border Grid.Row="6" Grid.ColumnSpan="4" Height="1" Background="#F6F6F6" />

                    <CheckBox FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                              Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="7" FontSize="11" Foreground="#F6F6F6"
                              Background="Transparent" IsChecked="{Binding Path=EntranceShuffle}"
                              Margin="4">Entrance Shuffle</CheckBox>

                    <CheckBox FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                              Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="8" FontSize="11" Foreground="#F6F6F6"
                              Background="Transparent" IsChecked="{Binding Path=BossShuffle}"
                              Margin="4">Boss Shuffle</CheckBox>

                    <CheckBox FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                              Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="9" FontSize="11" Foreground="#F6F6F6"
                              Background="Transparent" IsChecked="{Binding Path=EnemyShuffle}"
                              Margin="4">Enemy Shuffle</CheckBox>

                  </Grid>

                </Border>

              </Popup>

            </Panel>

          </Grid>

        </Border>

        <Border Background="#443C3C" Padding="10,5,10,15">

          <StackPanel Orientation="Horizontal">

            <ItemsControl Items="{Binding Path=Items}">

              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <WrapPanel ItemWidth="34" ItemHeight="40" MaxWidth="238" MaxHeight="200"
                             Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Top" />
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>

              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <view:ItemControl />
                </DataTemplate>
              </ItemsControl.ItemTemplate>

            </ItemsControl>

            <Grid Margin="6,0,4,0" ColumnDefinitions="Auto,Auto,Auto,Auto,Auto"
                  RowDefinitions="24,Auto" VerticalAlignment="Top" HorizontalAlignment="Left">

              <StackPanel Orientation="Horizontal" IsHitTestVisible="{Binding Path=SmallKeyShuffle}"
                          IsVisible="{Binding Path=SmallKeyShuffle}" Grid.Column="0" Grid.ColumnSpan="5"
                          VerticalAlignment="Top">

                <Image Source="avares://OpenTracker/Assets/Images/hc.png" Height="16" Width="20" />

                <ItemsControl Items="{Binding Path=HCItems}">

                  <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                      <Panel Height="16" Width="16" Margin="2,0,1,0" />
                    </ItemsPanelTemplate>
                  </ItemsControl.ItemsPanel>

                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <view:DungeonItemControl />
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>

                </ItemsControl>

                <Image Source="avares://OpenTracker/Assets/Images/at.png" Height="16" Width="20" />

                <ItemsControl Items="{Binding Path=ATItems}">

                  <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                      <Panel Height="16" Width="16" Margin="2,0,0,0" />
                    </ItemsPanelTemplate>
                  </ItemsControl.ItemsPanel>

                  <ItemsControl.ItemTemplate>
                    <DataTemplate>
                      <view:DungeonItemControl />
                    </DataTemplate>
                  </ItemsControl.ItemTemplate>

                </ItemsControl>

              </StackPanel>

              <StackPanel Orientation="Vertical" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left"
                          Margin="0,0,2,0">

                <Image Source="avares://OpenTracker/Assets/Images/ep.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/dp.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/th.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/pd.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/sp.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/sw.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/tt.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/ip.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/mm.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/tr.png" Height="16" Width="20" />
                <Image Source="avares://OpenTracker/Assets/Images/gt.png" Height="16" Width="20"
                       IsHitTestVisible="{Binding Path=SmallKeyShuffle}"
                       IsVisible="{Binding Path=SmallKeyShuffle}" />

              </StackPanel>

              <ItemsControl Grid.Column="1" Grid.Row="1" Items="{Binding Path=SmallKeyItems}"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            IsHitTestVisible="{Binding Path=SmallKeyShuffle}"
                            IsVisible="{Binding Path=SmallKeyShuffle}">

                <ItemsControl.ItemsPanel>
                  <ItemsPanelTemplate>
                    <StackPanel Width="16" Orientation="Vertical" />
                  </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <view:DungeonItemControl />
                  </DataTemplate>
                </ItemsControl.ItemTemplate>

              </ItemsControl>

              <ItemsControl Grid.Column="2" Grid.Row="1" Items="{Binding Path=BigKeyItems}"
                            HorizontalAlignment="Left" VerticalAlignment="Top"
                            IsHitTestVisible="{Binding Path=BigKeyShuffle}"
                            IsVisible="{Binding Path=BigKeyShuffle}">

                <ItemsControl.ItemsPanel>
                  <ItemsPanelTemplate>
                    <StackPanel Width="16" Orientation="Vertical" />
                  </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <view:DungeonItemControl />
                  </DataTemplate>
                </ItemsControl.ItemTemplate>

              </ItemsControl>

              <ItemsControl Grid.Column="3" Grid.Row="1" Items="{Binding Path=Prizes}"
                            HorizontalAlignment="Left" VerticalAlignment="Top">

                <ItemsControl.ItemsPanel>
                  <ItemsPanelTemplate>
                    <StackPanel Width="16" Orientation="Vertical" />
                  </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <view:DungeonPrizeControl />
                  </DataTemplate>
                </ItemsControl.ItemTemplate>

              </ItemsControl>

              <ItemsControl Grid.Column="4" Grid.Row="1" Items="{Binding Path=Bosses}"
                            HorizontalAlignment="Left" VerticalAlignment="Top">

                <ItemsControl.ItemsPanel>
                  <ItemsPanelTemplate>
                    <StackPanel Width="16" Orientation="Vertical" IsHitTestVisible="{Binding Path=BossShuffle}"
                                IsVisible="{Binding Path=BossShuffle}" />
                  </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <view:BossControl />
                  </DataTemplate>
                </ItemsControl.ItemTemplate>

              </ItemsControl>

            </Grid>

          </StackPanel>

        </Border>

      </StackPanel>

      <Grid Margin="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow},
            Path=PinnedLocationsPanelMargin, Mode=OneWay}" RowDefinitions="Auto, *"
            VerticalAlignment="Stretch">

        <Border Grid.Row="0" Background="#212121" Padding="10,5">

          <TextBlock FontFamily="avares://OpenTracker/Assets/font-20awesome-205-20free-regular-400.otf"
                     FontSize="12" FontWeight="SemiBold" Text="Pinned Locations" Foreground="#F6F6F6"
                     Background="Transparent" />

        </Border>

        <Border Grid.Row="1" Background="#443C3C" Padding="10,5,10,15">

          <ItemsControl Items="{Binding Path=PinnedLocations}">

            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <WrapPanel Orientation="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow}, Path=MapPanelOrientation, Mode=OneWay}" />
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <view:PinnedLocationControl Margin="1" />
              </DataTemplate>
            </ItemsControl.ItemTemplate>

          </ItemsControl>

        </Border>

      </Grid>

    </DockPanel>

    <Panel>

      <Viewbox Grid.Column="1" Stretch="Uniform" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">

        <ItemsControl x:Name="MapItemsControl" Items="{Binding Path=Maps}">

          <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
              <StackPanel Orientation="{Binding RelativeSource={RelativeSource AncestorType=view:MainWindow}, Path=MapPanelOrientation, Mode=OneWay}" />
            </ItemsPanelTemplate>
          </ItemsControl.ItemsPanel>

          <ItemsControl.ItemTemplate>
            <DataTemplate>
              <view:MapControl />
            </DataTemplate>
          </ItemsControl.ItemTemplate>

        </ItemsControl>

      </Viewbox>

      <Panel Height="16" Width="16" HorizontalAlignment="Right" VerticalAlignment="Top">

        <Image Source="avares://OpenTracker/Assets/Images/settings.png" PointerReleased="OpenAppSettingsPopup"
               Height="16" Width="16" HorizontalAlignment="Right" VerticalAlignment="Top" />

        <Popup IsOpen="{Binding Path=AppSettingsPopupOpen,
               RelativeSource={RelativeSource AncestorType=view:MainWindow}, Mode=TwoWay}" StaysOpen="False"
               PlacementMode="Left" PlacementTarget="{Binding RelativeSource={RelativeSource AncestorType=Panel},
               Path=VisibleItemPopupTarget}" HorizontalOffset="8" VerticalOffset="8"  >

          <view:AppSettings DataContext="{Binding Path=AppSettings}" />

        </Popup>

      </Panel>

    </Panel>

  </DockPanel>

</Window>
